<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>チャット</title>
	<link rel="stylesheet" type="text/css" href="../index.css">
</head>
<body>
<!--- <ul id="msgs"></ul>-->
<canvas id="canvas"></canvas>
</body>
</html>
<script>
  window.addEventListener('load', () => {
    let msgbox = document.getElementById('msgs');
    let form = document.getElementById('form');
    let sendMsg = document.getElementById('send-msg');
    let ws = new WebSocket('ws://' + window.location.host + '/websocket');

    ws.onopen = () => console.log('connection opened');
    ws.onclose = () => console.log('connection closed');
    ws.onmessage = m => {
      let li = document.createElement('li');
      li.textContent = m.data;
      msgbox.insertBefore(li, msgbox.firstChild);
    }

    sendMsg.addEventListener('click', () => sendMsg.value = '');

    form.addEventListener('submit', e => {
      ws.send(sendMsg.value);
      sendMsg.value = '';
      e.preventDefault();
    });
	});
	var img = new Image();
	img.src = "./branch.svg";
	var cvs = document.getElementById('canvas');
	var ctx = cvs.getContext('2d');
	var width = window.innerWidth;
	var height = window.innerHeight;
	var ss = 1000/3
	console.log(width,height)
	img.onload = function(){
        ctx.imageSmoothingEnabled = true;
			ctx.drawImage(img,0,0,ss,ss*(820/1440),0,0,width,height)
	}
</script>